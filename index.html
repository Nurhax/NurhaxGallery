<!DOCTYPE html>
    <html lang="en">

    <!--
    Nurhax Portfolio Gallery
    -->
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Nurhax Gallery Portfolio</title>
        <link rel="icon" href="images/WebLogo.png" type="image/png">
        <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP&display=swap" rel="stylesheet">
    </head>

    <!--
    Reader Mode Button and Overlay
    -->
    <div id ="reader-mode-btn" title="Toggle Reader Mode">
        ðŸ“–
    </div>

    <div id="reader-overlay">
        <div class = "reader-content">
            <div class="reader-main">
                <h1 style="text-align: left;">Muhammad Iqbal Nurhaq (Nurhax)</h1>
                <img src="images/Logo Main.png" alt="Logo Main" loading="lazy" style="width:360px; height:360px; border-radius:50%; object-fit:cover; display:block; margin:12px 0;">
                <h2>Software Engineer</h2>
                <p>A versatile Software Engineer, QA Tester, and Game Developer who blends deep technical expertise with creative skills in content creation and illustration.</p>

                <nav class="reader-nav" aria-label="Reader sections">
                    <a href="#about">About</a>
                    <a href="#experience">Experience</a>
                    <a href="#projects">Projects</a>
                </nav>

                <a class="social" href="https://github.com/Nurhax" target="_blank" rel="noopener noreferrer" aria-label="GitHub">
                    <svg width="20" height="20" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.22 2.2.82A7.65 7.65 0 018 4.6c.68.003 1.36.092 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.28.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/></svg>
                </a>
                <a class="social" href="https://www.linkedin.com/in/muhammad-iqbal-nurhaq-99b2a1297/" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M4.98 3.5C4.98 4.88 3.88 6 2.5 6S0 4.88 0 3.5 1.1 1 2.5 1 4.98 2.12 4.98 3.5zM0 8h5v16H0V8zm7.5 0h4.7v2.2h.1c.7-1.2 2.4-2.5 4.9-2.5 5.2 0 6.2 3.4 6.2 7.8V24h-5V16.5c0-1.8 0-4.1-2.5-4.1-2.5 0-2.9 1.9-2.9 3.9V24h-5V8z"/></svg>
                </a>
                <a class="social" href="https://www.instagram.com/nurhax.dev/" target="_blank" rel="noopener noreferrer" aria-label="Instagram">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M7 2C4.24 2 2 4.24 2 7v10c0 2.76 2.24 5 5 5h10c2.76 0 5-2.24 5-5V7c0-2.76-2.24-5-5-5H7zm8.5 3.5a1 1 0 110 2 1 1 0 010-2zM12 7a5 5 0 110 10 5 5 0 010-10zM12 9.5a2.5 2.5 0 100 5 2.5 2.5 0 000-5z"/></svg>
                </a>
                <a class="social" href="https://www.youtube.com/@Nurhax/" target="_blank" rel="noopener noreferrer" aria-label="YouTube">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M23.5 6.2s-.2-1.6-.8-2.3c-.8-1-1.7-1-2.1-1.1C16.6 2 12 2 12 2s-4.6 0-8.6.8c-.4.1-1.3.1-2.1 1.1C.7 4.6.5 6.2.5 6.2S0 8 0 9.9v4.2C0 16 0.5 17.8.5 17.8s.2 1.6.8 2.3c.8 1 1.9 1 2.4 1.1C7.4 22 12 22 12 22s4.6 0 8.6-.8c.4-.1 1.3-.1 2.1-1.1.6-.7.8-2.3.8-2.3s.5-1.8.5-3.7V9.9c0-1.9-.5-3.7-.5-3.7zM9.8 15.1V8.9l6.2 3.1-6.2 3.1z"/></svg>
                </a>
                <a class="social" href="https://cara.app/nurhax" target="_blank" rel="noopener noreferrer" aria-label="Cara.app">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false"><circle cx="12" cy="12" r="10"/><text x="12" y="12" font-size="10" text-anchor="middle" fill="#2f2150" dominant-baseline="middle" font-weight="700" font-family="Arial, sans-serif">C</text></svg>
                </a>
            </div>
        </div>

        <div class="reader-details">
            <aside class="reader-side" style="margin-left: auto;">
                <div class="reader-sections">
                    <section id="about">
                        <h2>About</h2>
                        <p>Iâ€™m a developer focused on building accessible, polished digital experiences. This reader mode strips away gameplay elements and surfaces content in a clean, readable layout.</p>
                    </section>

                    <section id="experience">
                        <h2>Experience</h2>
                        <p>Past roles include frontend engineering, accessibility-focused work, and building production web apps. (Placeholder â€” add your timeline or highlights here.)</p>
                    </section>

                    <section id="projects">
                        <h2>Projects</h2>
                        <p>Selected projects, case studies, and links to demos and repos. (Placeholder â€” list your most notable projects here.)</p>
                    </section>
                </div>
            </aside>
        </div>
    </div>


    <style>
        body, html {
            margin: 0;
            padding: 0;
            overflow: hidden;
            height: 100%;
            width: 100%;
            background: #000;
        }
        canvas {
            display: block;
        }

       /* Reader Mode Styles */
        /* Reader Mode Button */
        #reader-mode-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #9B5DE0;
            color: white;
            font-size: 36px;
            padding: 10px 14px;
            border-radius: 8px;
            cursor: pointer;
            z-index: 1000;
            user-select: none;
            transition: background 0.3s ease;
        }
        #reader-mode-btn:hover {
            background: #FDCFFA;
        }

    /* Reader Overlay with cursor-following radial spotlight */
    /* NOTE: This uses CSS vars (--mx / --my / --r). Add the small JS snippet below (in your <script>) to update --mx/--my on mousemove. */

    #reader-overlay {
        /* hidden by default */
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        overflow-y: auto;
        z-index: 999;
        padding: 48px 20px;

        /* base color fallback */
        background-color: #202350;
        color: #2f2150; /* deep text with purple tone */

        /* spotlight vars (JS will update --mx/--my in px; --r can be changed for radius) */
        --mx: 50%;
        --my: 50%;
        --r: 240px;

        /* layered background: spotlight radial gradient on top of base background */
        background-image:
            radial-gradient(circle var(--r) at var(--mx) var(--my),
                rgba(255,255,255,0.12) 0%,
                rgba(255,255,255,0.06) 25%,
                rgba(255,255,255,0.02) 40%,
                transparent 65%),
            linear-gradient(#202350, #202350);

        background-repeat: no-repeat;
        background-attachment: local;

        opacity: 0;
        transform: translateY(18px);
        pointer-events: none;

        transition:
            opacity 0.45s cubic-bezier(.2,.9,.2,1),
            transform 0.45s cubic-bezier(.2,.9,.2,1),
            background-position 0.12s linear; /* small smoothness when cursor moves */

        will-change: background, opacity, transform;
        display: flex;
        align-items: stretch; /* make children fill vertical space */
        justify-content: flex-start;
    }

    /* subtle change when overlay hovered (keeps cursor unchanged) */
    #reader-overlay:hover {
        /* tint the base a little when hovered */
        background-image:
            radial-gradient(circle var(--r) at var(--mx) var(--my),
                rgba(255,255,255,0.18) 0%,
                rgba(255,255,255,0.08) 25%,
                rgba(255,255,255,0.03) 45%,
                transparent 70%),
            linear-gradient(#202350, #202350);
    }

    #reader-overlay.active{
        opacity: 1;
        transform: translateY(0);
        pointer-events: auto;
    }

        .reader-content {
        max-width: none;
        width: 50%; /* left half */
        /* make content visually part of overlay: transparent so the overlay's spotlight shows through */
        background: transparent;
        margin: 0 24px 36px 24px; /* top 0, right 24, bottom 36, left 24 */
            font-family: 'Noto Serif JP', serif;
            line-height: 1.65;
            animation: fadeInContent 0.56s ease;
            padding: 8px 12px;
            border-radius: 8px;
            box-shadow: none;
            color: #FDCFFA; /* light text for contrast over dark overlay */
        }

    .reader-content h1 {
            text-align: center;
            color: #D78FEE; /* dark purple from palette */
            font-size: 1.8rem;
            letter-spacing: -0.5px;
        }

    .reader-details {
        /* right half */
        width: 50%;
        flex: 0 0 50%;
        margin: 24px 24px 36px 24px; /* move down slightly: top 24px */
        font-family: 'Noto Serif JP', serif;
        color: #FDCFFA;
        text-align: left;
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        justify-content: flex-start;
        position: relative; /* allow absolute positioning of inner sections when aligning */
    }

    .reader-details .reader-side { margin-left: 0; }

    /* Selection styles: change selected text color and give container a border when selection exists */
    .reader-details ::selection, .reader-content ::selection {
        color: #4E56C0;
        background: #FDCFFA;
    }

    /* Layout for reader content: two-column (main left, side right) */
    .reader-content { text-align: left; display: flex; gap: 28px; align-items: flex-start; }
    .reader-main { flex: 1 1 60%; min-width: 280px; }
    .reader-main { margin-top: 0; }
    .reader-side { width: 320px; flex: 0 0 320px; }
    .reader-content h2 { color: #D78FEE; margin-top: 22px; margin-bottom: 8px; }
    .reader-nav { display: flex; flex-direction: column; gap: 12px; margin: 12px 0 20px; }
    .reader-nav a { color: #202350; background: #FDCFFA; padding: 8px 12px; border-radius: 8px; text-decoration: none; font-weight: 600; display: inline-block; }
    .reader-nav a:hover { background: #D78FEE; color: #202350; }

    section { margin-bottom: 18px; }

    /* Responsive: stack columns on narrow viewports */
    @media (max-width: 900px) {
        #reader-overlay { flex-direction: column; }
        .reader-content, .reader-details { width: 100%; flex: 0 0 auto; margin: 16px 20px; }
        .reader-content { order: 1; }
        .reader-details { order: 2; }
    }

    /* When reader-sections is absolutely positioned it should not exceed the right column */
    .reader-details .reader-sections.absolute {
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
        width: calc(100% - 40px);
    }

    /* Social bar: horizontal */
    .social-bar { position: fixed; left: 16px; bottom: 16px; display: flex; flex-direction: row; gap: 10px; z-index: 1200; }
    .social { display: inline-flex; width: 44px; height: 44px; align-items: center; justify-content: center; background: rgba(255,255,255,0.03); border-radius: 10px; color: #FDCFFA; text-decoration: none; transition: transform .12s ease, background .12s ease; }
    .social:hover { transform: translateY(-4px); background: rgba(255,255,255,0.06); }

        /* Reader's mode transition */
        @keyframes fadeInContent {
            from { opacity: 0; transform: translateY(10px);}
            to { opacity: 1; transform: translateY(0); }
        }
    </style>


    <!--
    Phaser ts scripts and Reader Mode Toggle Script
    -->
    <body>
        <script type="module" src="/src/main.ts"></script>
        
        <script>
            const btn = document.getElementById("reader-mode-btn");
            const overlay = document.getElementById("reader-overlay");

            btn.addEventListener("click", () => {
                overlay.classList.toggle("active");
            });  

                        overlay.addEventListener('mousemove', (e) => {
                            const rect = overlay.getBoundingClientRect();
                            overlay.style.setProperty('--mx', (e.clientX - rect.left) + 'px');
                            overlay.style.setProperty('--my', (e.clientY - rect.top) + 'px');
                        });

            // Align right-side reader sections vertically to the center of the left h1
            function alignReaderSections() {
                const mainH1 = document.querySelector('.reader-main h1');
                const sections = document.querySelector('.reader-details .reader-sections');
                const details = document.querySelector('.reader-details');
                if (!mainH1 || !sections || !details) return;

                // get the vertical center of the h1 relative to the overlay
                const h1Rect = mainH1.getBoundingClientRect();
                const overlayRect = overlay.getBoundingClientRect();
                const h1CenterY = h1Rect.top + h1Rect.height / 2 - overlayRect.top;

                // compute top so that sections center aligns with h1 center in the right column
                const sectionsHeight = sections.offsetHeight;
                let top = h1CenterY - sectionsHeight / 2;

                // clamp top to stay within the details column
                const detailsPaddingTop = parseInt(window.getComputedStyle(details).paddingTop || '0', 10);
                const detailsPaddingBottom = parseInt(window.getComputedStyle(details).paddingBottom || '0', 10);
                const maxTop = details.offsetHeight - sectionsHeight - detailsPaddingBottom;
                if (top < detailsPaddingTop) top = detailsPaddingTop;
                if (top > maxTop) top = Math.max(detailsPaddingTop, maxTop);

                // apply absolute positioning class and set top
                sections.classList.add('absolute');
                sections.style.top = top + 'px';
            }

            // run when overlay becomes active and on resize
            btn.addEventListener('click', () => { setTimeout(alignReaderSections, 100); });
            window.addEventListener('resize', () => { if (overlay.classList.contains('active')) alignReaderSections(); });
            document.addEventListener('DOMContentLoaded', () => { if (overlay.classList.contains('active')) alignReaderSections(); });

            // Toggle .has-selection when the user selects text inside reader-content or reader-details
            function updateSelectionClasses() {
                const sel = document.getSelection();
                const hasText = sel && !sel.isCollapsed && sel.toString().trim().length > 0;
                const readerContent = document.querySelector('.reader-content');
                const readerDetails = document.querySelector('.reader-details');

                if (readerContent) readerContent.classList.toggle('has-selection', hasText && readerContent.contains(sel.anchorNode));
                if (readerDetails) readerDetails.classList.toggle('has-selection', hasText && readerDetails.contains(sel.anchorNode));
            }

            document.addEventListener('selectionchange', updateSelectionClasses);
            document.addEventListener('mouseup', () => setTimeout(updateSelectionClasses, 10));
        </script>
    </body>
    
</html>
