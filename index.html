<!DOCTYPE html>
    <html lang="en">

    <!--
    Nurhax Portfolio Gallery
    -->
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Nurhax Gallery Portfolio</title>
        <link rel="icon" href="images/WebLogo.png" type="image/png">
        <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP&display=swap" rel="stylesheet">
    </head>

    <!--
    Reader Mode Button and Overlay
    -->
    <div id ="reader-mode-btn" title="Toggle Reader Mode">
        ðŸ“–
    </div>

    <div id="reader-overlay">
        <div class = "reader-content">
            <div class="reader-main">
                <h1 style="text-align: left;">Muhammad Iqbal Nurhaq </h1>
                <h1 style="text-align: left; color: #FDCFFA;">(Nurhax)</h1>
                <img src="images/Logo Main.png" alt="Logo Main" loading="lazy" style="width:240px; height:240px; border-radius:50%; object-fit:cover; display:block; margin:12px 0;">
                <h2>Software Engineer</h2>
                <p>A versatile Software Engineer, QA Tester, and Game Developer who blends deep technical expertise with creative skills in content creation and illustration.</p>

                <nav class="reader-nav" aria-label="Reader sections">
                    <a href="#about">About</a>
                    <a href="#experience">Experience</a>
                    <a href="#projects">Projects</a>
                    <a href="#art-portfolio">Art Portfolio</a>
                    <a href="#content-showcase">Content Showcase</a>
                </nav>

                <a class="social" href="https://github.com/Nurhax" target="_blank" rel="noopener noreferrer" aria-label="GitHub">
                    <svg width="20" height="20" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.22 2.2.82A7.65 7.65 0 018 4.6c.68.003 1.36.092 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.28.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/></svg>
                </a>
                <a class="social" href="https://www.linkedin.com/in/muhammad-iqbal-nurhaq-99b2a1297/" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M4.98 3.5C4.98 4.88 3.88 6 2.5 6S0 4.88 0 3.5 1.1 1 2.5 1 4.98 2.12 4.98 3.5zM0 8h5v16H0V8zm7.5 0h4.7v2.2h.1c.7-1.2 2.4-2.5 4.9-2.5 5.2 0 6.2 3.4 6.2 7.8V24h-5V16.5c0-1.8 0-4.1-2.5-4.1-2.5 0-2.9 1.9-2.9 3.9V24h-5V8z"/></svg>
                </a>
                <a class="social" href="https://www.youtube.com/@Nurhax/" target="_blank" rel="noopener noreferrer" aria-label="YouTube">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M23.5 6.2s-.2-1.6-.8-2.3c-.8-1-1.7-1-2.1-1.1C16.6 2 12 2 12 2s-4.6 0-8.6.8c-.4.1-1.3.1-2.1 1.1C.7 4.6.5 6.2.5 6.2S0 8 0 9.9v4.2C0 16 0.5 17.8.5 17.8s.2 1.6.8 2.3c.8 1 1.9 1 2.4 1.1C7.4 22 12 22 12 22s4.6 0 8.6-.8c.4-.1 1.3-.1 2.1-1.1.6-.7.8-2.3.8-2.3s.5-1.8.5-3.7V9.9c0-1.9-.5-3.7-.5-3.7zM9.8 15.1V8.9l6.2 3.1-6.2 3.1z"/></svg>
                </a>
                <a class="social" href="https://www.instagram.com/nurhax.dev/" target="_blank" rel="noopener noreferrer" aria-label="Instagram">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M7 2C4.24 2 2 4.24 2 7v10c0 2.76 2.24 5 5 5h10c2.76 0 5-2.24 5-5V7c0-2.76-2.24-5-5-5H7zm8.5 3.5a1 1 0 110 2 1 1 0 010-2zM12 7a5 5 0 110 10 5 5 0 010-10zM12 9.5a2.5 2.5 0 100 5 2.5 2.5 0 000-5z"/></svg>
                </a>
                <a class="social" href="https://cara.app/nurhax" target="_blank" rel="noopener noreferrer" aria-label="Cara.app">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false"><circle cx="12" cy="12" r="10"/><text x="12" y="12" font-size="10" text-anchor="middle" fill="#2f2150" dominant-baseline="middle" font-weight="700" font-family="Arial, sans-serif">C</text></svg>
                </a>
            </div>
        </div>

        <div class="reader-details">
            <aside class="reader-side" style="margin-left: auto;">
                <div class="reader-sections">
                    <section id="about">
                        <h2>About</h2>
                        <p>At my core, I am a passionate generalist driven by an insatiable curiosity for knowledge, thriving on the challenge of mastering new tools, frameworks, and languages. This commitment to continuous learning allows me to adapt quickly and approach complex challenges with a versatile, well-rounded perspective.</p>
                        <p>My professional focus is Software Engineering, with a special emphasis on building unique, gamified applications. I aim to develop interactive experiences that are not only functional but also engaging and rewarding for the user</p>
                        <p>Complementing my development work is a deep-seated expertise in Quality Assurance (QA) and Software Testing, which I view as a critical mindset woven through the entire lifecycle. I believe quality is a continuous process that enhances the user experience and drives product success, not just a final phase.</p>
                        <p>Outside of my professional life, I express my creative and analytical sides through illustration and as a YouTube content creator. My channel applies a "philosophical QA approach" to deconstruct anime and otaku media, as I believe storytelling deserves the same level of scrutiny and care as software.</p>
                    </section>

                    <section id="experience">
                        <h2>Experience</h2>

                        <div class="timeline">
                            <div class="timeline-item">
                                <time class="date">May 2025 - Present</time>
                                <div class="meta">
                                    <h3 class="job-title">QA/Logistics Laboratory Assistant â€” Hardware and Embedded Systems Laboratory</h3>
                                    <p class="desc">Web Quality Assurance and Tester, Logistics -- Manual and Automation Testing, V&V Inventory</p>
                                    <div class="tech">Frameworks / Tools: JMeter Â· Katalon Studio</div>
                                    <h5></h5>
                                </div>
                            </div>

                            <div class="timeline-item">
                                <time class="date">Jun 2025 - Sep 2025</time>
                                <div class="meta">
                                    <h3 class="job-title">Software Engineer Intern â€” Siemens</h3>
                                    <p class="desc">Developer and Tester -- 200+ P2P data systems testing, developed digitalized P2P testing form</p>
                                    <div class="tech">Frameworks / Tools: Python Â· Behave Framework Â· Cucumber Â· Manual Testing Â· TkInter</div>
                                    <h5></h5>
                                </div>
                            </div>

                            <div class="timeline-item">
                                <time class="date">Feb 2025 - Jun 2025</time>
                                <div class="meta">
                                    <h3 class="job-title">Software Construction Practicum Assistant â€” Informatics Laboratory</h3>
                                    <p class="desc">Practicum Assistant & Mentor -- Assisted 40+ students weekly in learning software construction principles and best practices.</p>
                                    <div class="tech">Frameworks / Tools: Microsoft Excel Â· C# Â· .Net Â· Visual Studio Â· Git</div>
                                    <h5></h5>
                                </div>
                            </div>

                            <div class="timeline-item">
                                <time class="date">Feb 2025 - Jun 2025</time>
                                <div class="meta">
                                    <h3 class="job-title">Object Oriented Programming Basics Practicum Assistant â€” Informatics Laboratory</h3>
                                    <p class="desc">Practicum Assistant & Mentor -- Assisted 40+ students weekly in learning object-oriented programming principles and best practices.</p>
                                    <div class="tech">Frameworks / Tools: Microsoft Excel Â· Java Â· Eclipse IDE Â· Maven Â· Object Oriented Programming</div>
                                    <h5></h5>
                                </div>
                            </div>

                            <div class="timeline-item">
                                <time class="date">Sep 2024 - Jan 2025</time>
                                <div class="meta">
                                    <h3 class="job-title">Data Structures Practicum Assistant â€” Informatics Laboratory</h3>
                                    <p class="desc">Practicum Assistant & Mentor -- Assisted 40+ students weekly in debugging and troubleshooting code related to data structures.</p>
                                    <div class="tech">Frameworks / Tools: Microsoft Excel Â· C++ Â· Codeblocks IDE Â· Tree Â· Linked Lists</div>
                                    <h5></h5>
                                </div>
                            </div>

                            <div class="timeline-item">
                                <time class="date">Jan 2023 - Aug 2024</time>
                                <div class="meta">
                                    <h3 class="job-title">Game Developer Lead â€” Chevalier Laboratory</h3>
                                    <p class="desc">Team leader & QA -- Best rating award for the game development division.</p>
                                    <div class="tech">Frameworks / Tools: Unity Â· BeepBox Â· Aseprite Â· Adobe Photoshop Â· C#</div>
                                    <h5></h5>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!--Nanti disini kasih untuk download resume/CV-->

                    <section id="projects">
                        <h2>Projects</h2>
                        <p>Selected projects tailored for showcasing skills, expertise, and creativity.</p>

                        <div class="projects-grid" role="list">
                            <a class="project" href="https://github.com/Nurhax/CERDIKMOBILE" target="_blank" rel="noopener noreferrer" role="listitem" aria-label="CERDIK â€” View repository">
                                <figure class="project-figure" aria-hidden="true">
                                    <img src="images/Cerdik.jpg" alt="CERDIK" loading="lazy">
                                </figure>
                                <div class="project-meta">
                                    <h3>CERDIK</h3>
                                    <p>A medications reminder app with two key roles. Health workers and patients. Health workers can manage medication schedules, while patients receive clear reminders of what and when to take their prescribed medication.</p>
                                    <div class="project-tags">
                                        <span class="tag">Figma</span>
                                        <span class="tag">Flutter</span>
                                        <span class="tag">PHP</span>
                                        <span class="tag">MySQL</span>
                                        <span class="tag">Flutter Test</span>
                                    </div>
                                </div>
                            </a>

                            <a class="project" href="https://github.com/Nurhax/Social-Palace" target="_blank" rel="noopener noreferrer" role="listitem" aria-label="Social Palace â€” View repository">
                                <figure class="project-figure" aria-hidden="true">
                                    <img src="images/SoPal.png" alt="Social Palace" loading="lazy">
                                </figure>
                                <div class="project-meta">
                                    <h3>Social Palace (SoPal)</h3>
                                    <p>A personal social relationship tracker app inspired by the Confidant mechanic from Persona 5. Players can add confidants, level up confidants, track confidant logs, keep your favorite confidants in check.</p>
                                    <div class="project-tags">
                                        <span class="tag">Flutter</span>
                                        <span class="tag">Appium</span>
                                        <span class="tag">SQFlite</span>
                                        <span class="tag">Figma</span>
                                    </div>
                                </div>
                            </a>

                            <a class="project" href="https://github.com/Nurhax/LemmyBot" target="_blank" rel="noopener noreferrer" role="listitem" aria-label="Lemmy Bot â€” View repository">
                                <figure class="project-figure" aria-hidden="true">
                                    <img src="images/LemmyBot.png" alt="Lemmy Bot" loading="lazy">
                                </figure>
                                <div class="project-meta">
                                    <h3>Lemmy Bot</h3>
                                    <p>A virtual assistant for livestreaming in youtube. Reading chat every 60 seconds, talk to viewers and provide real-time responses.</p>
                                    <div class="project-tags">
                                        <span class="tag">Elevenlabs</span>
                                        <span class="tag">Python</span>
                                        <span class="tag">CharAI</span>
                                        <span class="tag">OBSWebsockets</span>
                                    </div>
                                </div>
                            </a>

                            <a class="project" href="https://nurhax.itch.io/" target="_blank" rel="noopener noreferrer" role="listitem" aria-label="Pargantara : The Untold Stories â€” View game">
                                <figure class="project-figure" aria-hidden="true">
                                    <img src="images/Pargantara.png" alt="Pargantara: The Untold Stories" loading="lazy">
                                </figure>
                                <div class="project-meta">
                                    <h3>Pargantara: The Untold Stories</h3>
                                    <p>A roguelike story-driven game inspired by the Java kingdom, featuring a gacha system and a wide variety of unlockable characters.</p>
                                    <div class="project-tags">
                                        <span class="tag">Unity</span>
                                        <span class="tag">BeepBox</span>
                                        <span class="tag">Aseprite</span>
                                        <span class="tag">C#</span>
                                        <span class="tag">Itch.io</span>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </section>

                    <!--Nanti disini kasih untuk lihat semua project -->

                    <section id="art-portfolio">
                        <h2>Art Portfolio</h2>
                        <p>A showcase of my illustration work and creative projects. Please click the image to view it full-size.</p>

                        <div class="art-grid" role="list">
                            <!-- Replace src values with your artwork images -->
                            <button class="art-item" data-full="images/Kafka1.png" aria-label="Kafka HSR" role="listitem">
                                <figure class="art-figure" aria-hidden="true">
                                    <img src="images/Kafka1.png" data-full="images/Kafka1.png" alt="Kafka HSR" loading="lazy">
                                </figure>
                            </button>

                            <button class="art-item" data-full="images//Hoshiguma2.png" aria-label="Hoshiguma Arknights" role="listitem">
                                <figure class="art-figure" aria-hidden="true">
                                    <img src="images//Hoshiguma2.png" data-full="images/Hoshiguma2.png" alt="Hoshiguma Arknights" loading="lazy">
                                </figure>
                            </button>

                            <button class="art-item" data-full="images/Shinobu3.png" aria-label="Shinobu Monogatari" role="listitem">
                                <figure class="art-figure" aria-hidden="true">
                                    <img src="images/Shinobu3.png" data-full="images/Shinobu3.png" alt="Shinobu Monogatari" loading="lazy">
                                </figure>
                            </button>

                            <button class="art-item" data-full="images/Hachikuji4.png" aria-label="Hachikuji Monogatari" role="listitem">
                                <figure class="art-figure" aria-hidden="true">
                                    <img src="images/Hachikuji4.png" data-full="images/Hachikuji4.png" alt="Hachikuji Monogatari" loading="lazy">
                                </figure>
                            </button>
                        </div>
                    </section>

                    <!--Nanti disini kasih untuk lihat semua artworks (ig) -->

                    <section id="content-showcase">
                        <h2>Content Showcase</h2>
                        <p>A curated selection of my best content creation works.</p>

                        <div class="projects-grid" role="list">
                            <a class="project" href="https://www.youtube.com/watch?v=FqltIqB4Hrw" target="_blank" role="listitem" aria-label="ADO's Latest Facts">
                                <figure class="project-figure" aria-hidden="true">
                                    <img src="https://i.ytimg.com/vi/FqltIqB4Hrw/hq720.jpg?sqp=-oaymwEhCK4FEIIDSFryq4qpAxMIARUAAAAAGAElAADIQj0AgKJD&rs=AOn4CLD8m5j8RlswndJYw-hiNLuUQl_99A" alt="Content Case Study" loading="lazy">
                                </figure>
                                <div class="project-meta">
                                    <h3> Fakta Baru [ADO] Yang Harus Kamu Ketahui! </h3>
                                    <p>A breakdown of ADO's latest facts in 2025. Also explaining the implications in her music videos.</p>
                                </div>
                            </a>

                            <a class="project" href="https://www.youtube.com/watch?v=BsfFqoGR6HM" role="listitem" target="_blank" aria-label="Araragi And Hanekawa's Relationship Explained">
                                <figure class="project-figure" aria-hidden="true">
                                    <img src="https://i.ytimg.com/vi/BsfFqoGR6HM/hq720.jpg?sqp=-oaymwEhCK4FEIIDSFryq4qpAxMIARUAAAAAGAElAADIQj0AgKJD&rs=AOn4CLCcI2e3x8X6S_vayDrTYkLJGM0MGQ" alt="Tooling Walkthrough" loading="lazy">
                                </figure>
                                <div class="project-meta">
                                    <h3> FRIENDZONE TERBRUTAL DI ANIME (Hanekawa & Araragi) </h3>
                                    <p>An exploration of the complex relationship dynamics between Hanekawa and Araragi in the Monogatari series.</p>
                                </div>
                            </a>
                        </div>
                    </section>
                </div>
            </aside>
        </div>
    </div>


    <style>
        body, html {
            margin: 0;
            padding: 0;
            overflow: hidden;
            height: 100%;
            width: 100%;
            background: #000;
        }
        canvas {
            display: block;
        }

       /* Reader Mode Styles */
        /* Reader Mode Button */
        #reader-mode-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #9B5DE0;
            color: white;
            font-size: 36px;
            padding: 10px 14px;
            border-radius: 8px;
            cursor: pointer;
            z-index: 1000;
            user-select: none;
            transition: background 0.3s ease;
        }
        #reader-mode-btn:hover {
            background: #FDCFFA;
        }

    /* Reader Overlay with cursor-following radial spotlight */
    /* NOTE: This uses CSS vars (--mx / --my / --r). Add the small JS snippet below (in your <script>) to update --mx/--my on mousemove. */

    #reader-overlay {
        /* hidden by default */
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        overflow-y: auto;
        z-index: 999;
        padding: 48px 20px;

        /* base color fallback */
        background-color: #101229;
        color: #101229; /* deep text with purple tone */

        /* spotlight vars (JS will update --mx/--my in px; --r can be changed for radius) */
        --mx: 50%;
        --my: 50%;
        --r: 240px;

        /* layered background: spotlight radial gradient on top of base background */
        background-image:
            radial-gradient(circle var(--r) at var(--mx) var(--my),
                rgba(255,255,255,0.12) 0%,
                rgba(255,255,255,0.06) 25%,
                rgba(255,255,255,0.02) 40%,
                transparent 65%),
            linear-gradient(#202350, #202350);

        background-repeat: no-repeat;
        background-attachment: local;

        opacity: 0;
        transform: translateY(18px);
        pointer-events: none;

        transition:
            opacity 0.45s cubic-bezier(.2,.9,.2,1),
            transform 0.45s cubic-bezier(.2,.9,.2,1),
            background-position 0.12s linear; /* small smoothness when cursor moves */

        will-change: background, opacity, transform;
        display: flex;
        align-items: stretch; /* make children fill vertical space */
        justify-content: flex-start;
    }

    /* subtle change when overlay hovered (keeps cursor unchanged) */
    #reader-overlay:hover {
        /* tint the base a little when hovered */
        background-image:
            radial-gradient(circle var(--r) at var(--mx) var(--my),
                rgba(255,255,255,0.18) 0%,
                rgba(255,255,255,0.08) 25%,
                rgba(255,255,255,0.03) 45%,
                transparent 70%),
            linear-gradient(#202350, #202350);
    }

    #reader-overlay.active{
        opacity: 1;
        transform: translateY(0);
        pointer-events: auto;
    }

    .reader-content {
    max-width: none;
    width: 50%; /* left half */
    /* make content visually part of overlay: transparent so the overlay's spotlight shows through */
    background: transparent;
    margin: 0 24px 36px 24px; /* top 0, right 24, bottom 36, left 24 */
        font-family: 'Noto Serif JP', serif;
        line-height: 1.65;
        animation: fadeInContent 0.56s ease;
        padding: 8px 12px;
        border-radius: 8px;
        box-shadow: none;
        color: #FDCFFA; /* light text for contrast over dark overlay */
    }

    .reader-content h1 {
            text-align: center;
            color: #D78FEE; /* dark purple from palette */
            font-size: 1.8rem;
            letter-spacing: -0.5px;
        }

    .reader-details {
        /* right half */
        width: 50%;
        flex: 0 0 50%;
        margin: 24px 24px 36px 24px; /* move down slightly: top 24px */
        font-family: 'Noto Serif JP', serif;
        color: #FDCFFA;
        text-align: left;
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        justify-content: flex-start;
        position: relative; /* allow absolute positioning of inner sections when aligning */
        /* Make the right column independently scrollable when content is long */
        overflow-y: auto;
        -webkit-overflow-scrolling: touch; /* smooth momentum on iOS */
        max-height: calc(100vh - 96px); /* leave space for overlay padding */
        /* Justified text for a clean reader layout */
        text-align: justify;
        text-justify: inter-word;
        -webkit-hyphens: auto;
        -ms-hyphens: auto;
        hyphens: auto;
        word-break: break-word;
    }

    .reader-details .reader-side { margin-left: 0; }

    /* Make sure headings and meta text are visually left-aligned while
       paragraphs and other long text are justified for readability. */
    .reader-details h2,
    .reader-details h3,
    .reader-details .job-title,
    .reader-details .date,
    .reader-details .tech {
        text-align: left;
    }

    /* Selection styles: change selected text color and give container a border when selection exists */
    .reader-details ::selection, .reader-content ::selection {
        color: #4E56C0;
        background: #FDCFFA;
    }

    /* Layout for reader content: two-column (main left, side right) */
    .reader-content { text-align: left; display: flex; gap: 28px; align-items: flex-start; }
    .reader-main { flex: 1 1 60%; min-width: 280px; }
    .reader-main { margin-top: 0; }
    .reader-side { width: 320px; flex: 0 0 320px; }
    .reader-content h2 { color: #D78FEE; margin-top: 22px; margin-bottom: 8px; }
    .reader-nav { display: flex; flex-direction: column; gap: 12px; margin: 12px 0 20px; }
    .reader-nav a { color: #202350; background: #FDCFFA; padding: 8px 12px; border-radius: 8px; text-decoration: none; font-weight: 600; display: inline-block; }
    .reader-nav a:hover { background: #D78FEE; color: #202350; }

    section { margin-bottom: 18px; }

    /* Responsive: stack columns on narrow viewports */
    @media (max-width: 900px) {
        #reader-overlay { flex-direction: column; }
        .reader-content, .reader-details { width: 100%; flex: 0 0 auto; margin: 16px 20px; }
        .reader-content { order: 1; }
        .reader-details { order: 2; }
    }

    /* When reader-sections is absolutely positioned it should not exceed the right column */
    .reader-details .reader-sections.absolute {
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
        width: calc(100% - 40px);
        /* When absolutely positioned, allow sections to still scroll inside details */
        max-height: calc(100vh - 160px);
        overflow-y: auto;
    }

    /* Social bar: horizontal */
    .social-bar { position: fixed; left: 16px; bottom: 16px; display: flex; flex-direction: row; gap: 10px; z-index: 1200; }
    .social { display: inline-flex; width: 44px; height: 44px; align-items: center; justify-content: center; background: rgba(255,255,255,0.03); border-radius: 10px; color: #FDCFFA; text-decoration: none; transition: transform .12s ease, background .12s ease; }
    .social:hover { transform: translateY(-4px); background: rgba(255,255,255,0.06); }

        /* Reader's mode transition */
        @keyframes fadeInContent {
            from { opacity: 0; transform: translateY(10px);}
            to { opacity: 1; transform: translateY(0); }
        }

    /* Project grid styles (applies to any .projects-grid) */
    .projects-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 18px;
        margin-top: 12px;
    }

    @media (max-width: 780px) {
        #projects .projects-grid {
            grid-template-columns: 1fr;
        }
    }

    .projects-grid .project {
        display: block;
        background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
        border-radius: 10px;
        overflow: hidden;
        text-decoration: none;
        color: inherit;
        box-shadow: 0 6px 18px rgba(8,7,16,0.6);
        transition: transform .18s ease, box-shadow .18s ease;
    }

    .projects-grid .project:hover {
        transform: translateY(-6px);
        box-shadow: 0 18px 40px rgba(8,7,16,0.75);
    }

    .projects-grid .project-figure {
        position: relative;
        width: 100%;
        padding-top: 56.25%; /* 16:9 ratio */
        background: #0e0e18;
    }

    .projects-grid .project-figure img {
        position: absolute;
        inset: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        object-position: center center;
        display: block;
    }

    .projects-grid .project-meta {
        padding: 12px 14px;
        font-family: 'Noto Serif JP', serif;
        background: linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
    }

    .projects-grid .project-meta h3 {
        margin: 0 0 6px 0;
        font-size: 1.05rem;
        color: #FDCFFA;
    }

    .projects-grid .project-meta p {
        margin: 0;
        color: #D7C3E9;
        font-size: 0.94rem;
        line-height: 1.45;
    }

    /* small tag row */
    .projects-grid .project-tags {
        margin-top: 10px;
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
    }

    .projects-grid .tag {
        background: rgba(255,255,255,0.03);
        color: #FDCFFA;
        padding: 6px 8px;
        border-radius: 999px;
        font-size: 0.78rem;
        font-weight: 600;
    }
    
    /* Art grid styles */
    .art-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
        gap: 12px;
        margin-top: 12px;
    }

    .art-item {
        /* match project card base background exactly */
        background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
        border-radius: 10px;
        overflow: hidden;
        padding: 0;
        border: none;
        cursor: pointer;
        display: block;
        position: relative; /* for ::after spotlight */

        /* spotlight vars (updated via JS) */
        --mx: 50%;
        --my: 50%;
        --r: 120px;
    }

    /* spotlight layer implemented as a pseudo-element so the base card color stays visible */
    .art-item::after {
        content: '';
        position: absolute;
        inset: 0;
        pointer-events: none;
        background-image: radial-gradient(circle var(--r) at var(--mx) var(--my),
            rgba(255,255,255,0.00) 0%,
            rgba(255,255,255,0.00) 25%,
            transparent 65%);
        transition: background 0.14s linear, transform .14s ease, box-shadow .14s ease;
        will-change: background;
        border-radius: inherit;
    }

    .art-item.hovering::after {
        background-image: radial-gradient(circle var(--r) at var(--mx) var(--my),
            rgba(255,255,255,0.10) 0%,
            rgba(255,255,255,0.05) 30%,
            rgba(255,255,255,0.02) 50%,
            transparent 75%);
    }

    .art-item.hovering {
        --r: 220px; /* larger spotlight when hovering */
        box-shadow: 0 12px 34px rgba(8,7,16,0.66);
        transform: translateY(-6px);
    }

    .art-figure { position: relative; width: 100%; padding-top: 75%; background: #0e0e18; }
    .art-figure img { position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover; object-position: center center; display: block; }

    /* Modal viewer */
    .art-modal {
        position: fixed;
        inset: 0;
        display: none;
        align-items: center;
        justify-content: center;
        background: rgba(0,0,0,0.75);
        z-index: 2000;
        padding: 24px;
    }

    .art-modal.open { display: flex; }

    .art-modal .frame {
        max-width: 95vw;
        max-height: 95vh;
        background: transparent;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 8px 30px rgba(0,0,0,0.6);
    }

    .art-modal img { display: block; width: 100%; height: auto; max-height: 95vh; object-fit: contain; }

    .art-modal .close-btn {
        position: absolute;
        right: 18px;
        top: 18px;
        background: rgba(255,255,255,0.06);
        color: #FDCFFA;
        border: none;
        padding: 8px 10px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 16px;
    }
    </style>


    <!--
    Phaser ts scripts and Reader Mode Toggle Script
    -->
    <body>
        <script type="module" src="/src/main.ts"></script>
        
        <script>
            const btn = document.getElementById("reader-mode-btn");
            const overlay = document.getElementById("reader-overlay");

            btn.addEventListener("click", () => {
                overlay.classList.toggle("active");

                // When overlay becomes active, position the spotlight using
                // the last known pointer (or center) and align sections.
                if (overlay.classList.contains('active')) {
                    setTimeout(() => {
                        updateOverlayVars();
                        alignReaderSections();
                    }, 80);
                }
            });  

                        // Robust pointer tracking: keep last pointer coordinates so the
                        // spotlight can be recomputed if the page scrolls, resizes, or
                        // the document becomes hidden/visible (minimize/restore).
                        let lastPointer = { x: null, y: null };

                        // Use pointermove on the document so we capture events even when
                        // the pointer is outside the overlay element (helps after scroll).
                        const updatePointerFromEvent = (clientX, clientY) => {
                            lastPointer.x = clientX;
                            lastPointer.y = clientY;
                            updateOverlayVars();
                        };

                        document.addEventListener('pointermove', (e) => {
                            // only update when pointer is not a touch contact or when
                            // overlay is active - still store coords for later.
                            updatePointerFromEvent(e.clientX, e.clientY);
                        }, { passive: true });

                        // Compute and set CSS vars relative to the overlay's bounding rect.
                        function updateOverlayVars() {
                            if (!overlay) return;
                            const rect = overlay.getBoundingClientRect();

                            // If we don't have a stored pointer, center the spotlight in the
                            // overlay so it is visible when first opened.
                            let px = lastPointer.x;
                            let py = lastPointer.y;
                            if (px === null || py === null) {
                                px = rect.left + rect.width / 2;
                                py = rect.top + rect.height / 2;
                            }

                            // Convert client coords to coordinates relative to overlay
                            // (so CSS var --mx/--my will be in px from the overlay's top-left).
                            const relX = Math.round(px - rect.left);
                            const relY = Math.round(py - rect.top);

                            overlay.style.setProperty('--mx', relX + 'px');
                            overlay.style.setProperty('--my', relY + 'px');
                        }

                        // Recompute spotlight on scroll and resize so it stays under the
                        // cursor. Use passive listeners to avoid jank.
                        window.addEventListener('scroll', () => {
                            if (!overlay.classList.contains('active')) return;
                            updateOverlayVars();
                        }, { passive: true });

                        window.addEventListener('resize', () => {
                            if (!overlay.classList.contains('active')) return;
                            updateOverlayVars();
                        });

                        // When page visibility changes (minimize/restore), the pointer may
                        // be lost; when becoming visible again, recompute using stored
                        // coords or center if none.
                        document.addEventListener('visibilitychange', () => {
                            if (document.visibilityState === 'visible' && overlay.classList.contains('active')) {
                                updateOverlayVars();
                            }
                        });

                        // Also update when the overlay itself is scrolled (it can be
                        // scrollable). Use capture to ensure we catch it.
                        overlay.addEventListener('scroll', () => {
                            updateOverlayVars();
                        }, { passive: true, capture: true });

                        // Prevent page/game scroll except when interacting with
                        // the reader overlay. This keeps the game view
                        // non-scrollable while allowing the overlay to be
                        // scrolled when active.
                        function isEventInsideOverlay(e) {
                            try {
                                if (!overlay) return false;
                                // Prefer composedPath when available
                                const path = (e.composedPath && e.composedPath()) || (e.path || []);
                                if (path && path.length) return path.indexOf(overlay) !== -1;
                                return overlay.contains(e.target);
                            } catch (err) {
                                return overlay.contains(e.target);
                            }
                        }

                        // Intercept wheel events and prevent default when they
                        // are not targeting the overlay. passive: false is
                        // required so we can call preventDefault().
                        document.addEventListener('wheel', (e) => {
                            if (!isEventInsideOverlay(e)) {
                                e.preventDefault();
                            }
                        }, { passive: false });

                        // Prevent touchmove from scrolling the game view on
                        // mobile; allow touch scrolling when inside the overlay.
                        document.addEventListener('touchmove', (e) => {
                            if (!isEventInsideOverlay(e)) {
                                e.preventDefault();
                            }
                        }, { passive: false });

            // Align right-side reader sections vertically to the center of the left h1
            function alignReaderSections() {
                const mainH1 = document.querySelector('.reader-main h1');
                const sections = document.querySelector('.reader-details .reader-sections');
                const details = document.querySelector('.reader-details');
                if (!mainH1 || !sections || !details) return;

                // get the vertical center of the h1 relative to the overlay
                const h1Rect = mainH1.getBoundingClientRect();
                const overlayRect = overlay.getBoundingClientRect();
                const h1CenterY = h1Rect.top + h1Rect.height / 2 - overlayRect.top;

                // compute top so that sections center aligns with h1 center in the right column
                const sectionsHeight = sections.offsetHeight;
                let top = h1CenterY - sectionsHeight / 2;

                // clamp top to stay within the details column
                const detailsPaddingTop = parseInt(window.getComputedStyle(details).paddingTop || '0', 10);
                const detailsPaddingBottom = parseInt(window.getComputedStyle(details).paddingBottom || '0', 10);
                const maxTop = details.offsetHeight - sectionsHeight - detailsPaddingBottom;
                if (top < detailsPaddingTop) top = detailsPaddingTop;
                if (top > maxTop) top = Math.max(detailsPaddingTop, maxTop);

                // apply absolute positioning class and set top
                sections.classList.add('absolute');
                sections.style.top = top + 'px';
            }

            // run on resize
            window.addEventListener('resize', () => { if (overlay.classList.contains('active')) alignReaderSections(); });
            document.addEventListener('DOMContentLoaded', () => { if (overlay.classList.contains('active')) alignReaderSections(); });

            // Toggle .has-selection when the user selects text inside reader-content or reader-details
            function updateSelectionClasses() {
                const sel = document.getSelection();
                const hasText = sel && !sel.isCollapsed && sel.toString().trim().length > 0;
                const readerContent = document.querySelector('.reader-content');
                const readerDetails = document.querySelector('.reader-details');

                if (readerContent) readerContent.classList.toggle('has-selection', hasText && readerContent.contains(sel.anchorNode));
                if (readerDetails) readerDetails.classList.toggle('has-selection', hasText && readerDetails.contains(sel.anchorNode));
            }

            document.addEventListener('selectionchange', updateSelectionClasses);
            document.addEventListener('mouseup', () => setTimeout(updateSelectionClasses, 10));

            // Ensure each .art-item receives pointer handlers to update its own spotlight vars
            function attachArtItemSpotlights() {
                const items = Array.from(document.querySelectorAll('.art-item'));
                if (!items.length) return;

                items.forEach(item => {
                    function setVarsFromEvent(e) {
                        const clientX = (e.touches && e.touches[0] && e.touches[0].clientX) || e.clientX;
                        const clientY = (e.touches && e.touches[0] && e.touches[0].clientY) || e.clientY;
                        if (clientX == null || clientY == null) return;
                        const rect = item.getBoundingClientRect();
                        const relX = Math.round(clientX - rect.left);
                        const relY = Math.round(clientY - rect.top);
                        item.style.setProperty('--mx', relX + 'px');
                        item.style.setProperty('--my', relY + 'px');
                    }

                    item.addEventListener('pointermove', (e) => { setVarsFromEvent(e); item.classList.add('hovering'); }, { passive: true });
                    item.addEventListener('pointerenter', (e) => { setVarsFromEvent(e); item.classList.add('hovering'); });
                    item.addEventListener('pointerleave', () => { item.classList.remove('hovering'); item.style.setProperty('--mx', '50%'); item.style.setProperty('--my', '50%'); });
                    item.addEventListener('touchmove', (e) => { setVarsFromEvent(e); }, { passive: true });
                });
            }

            // Attach handlers after DOM is ready
            document.addEventListener('DOMContentLoaded', attachArtItemSpotlights);
        </script>

        <!-- Art modal markup -->
        <div class="art-modal" id="art-modal" role="dialog" aria-modal="true" aria-hidden="true">
            <div class="frame" role="document">
                <button class="close-btn" id="art-modal-close" aria-label="Close image">âœ•</button>
                <img id="art-modal-img" src="" alt="Full artwork">
            </div>
        </div>
        <script>
            (function(){
                const modal = document.getElementById('art-modal');
                const modalImg = document.getElementById('art-modal-img');
                const closeBtn = document.getElementById('art-modal-close');
                let lastFocused = null;

                function openModal(src, alt, triggerEl) {
                    modalImg.src = src;
                    modalImg.alt = alt || 'Artwork';
                    modal.classList.add('open');
                    modal.setAttribute('aria-hidden', 'false');
                    lastFocused = triggerEl || document.activeElement;
                    closeBtn.focus();
                }

                function closeModal() {
                    modal.classList.remove('open');
                    modal.setAttribute('aria-hidden', 'true');
                    modalImg.src = '';
                    if (lastFocused && lastFocused.focus) lastFocused.focus();
                }

                // delegate click from art grid
                document.addEventListener('click', (e) => {
                    const btn = e.target.closest && e.target.closest('.art-item');
                    if (!btn) return;
                    e.preventDefault();
                    const imgSrc = btn.getAttribute('data-full') || btn.querySelector('img')?.getAttribute('data-full');
                    const alt = btn.querySelector('img')?.alt || '';
                    if (imgSrc) openModal(imgSrc, alt, btn);
                });

                // close interactions
                closeBtn.addEventListener('click', closeModal);
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) closeModal(); // backdrop click
                });

                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape' && modal.classList.contains('open')) {
                        closeModal();
                    }
                });
            })();
        </script>
        </script>
    </body>
    
</html>
